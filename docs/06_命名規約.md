# 命名・規約
YouTube分析バッチシステム

## 1. Python

### 1.1 識別子
| 種類 | 規則 | 例 |
|-----|------|-----|
| 変数 | snake_case | `video_id`, `comment_limit` |
| 関数 | snake_case | `fetch_comments()`, `classify_comment()` |
| クラス | PascalCase | `YouTubeClient`, `SentimentAnalyzer` |
| 定数 | UPPER_SNAKE_CASE | `DEFAULT_LIMIT`, `API_KEY` |
| モジュール | snake_case | `youtube.py`, `analyzer.py` |

### 1.2 型ヒント
```python
# 必須: 関数の引数と戻り値に型ヒントを付ける
def fetch_comments(video_id: str, comment_limit: int = 10) -> list[dict]:
    ...
```

## 2. データベース

### 2.1 テーブル・カラム
| 種類 | 規則 | 例 |
|-----|------|-----|
| テーブル名 | snake_case（複数形） | `videos`, `video_comment_summary` |
| カラム名 | snake_case | `video_id`, `created_at` |
| 主キー | `id` | `id BIGINT AUTO_INCREMENT` |
| 外部キー | `{参照テーブル単数形}_id` | `video_id` |
| タイムスタンプ | `*_at` | `created_at`, `updated_at`, `fetched_at` |

## 3. ファイル命名

### 3.1 出力ファイル
| 種類 | 規則 | 例 |
|-----|------|-----|
| 中間JSON | `{video_id}.json` | `dQw4w9WgXcQ.json` |
| アプリログ | `app.log` | `./logs/app.log` |
| エラーログ | `error.log` | `./logs/error.log` |

### 3.2 ソースファイル
| 種類 | 規則 | 例 |
|-----|------|-----|
| モジュール | snake_case.py | `youtube.py`, `analyzer.py` |
| テストファイル | `test_{対象モジュール}.py` | `test_analyzer.py` |
| 設定ファイル | 小文字 | `logging.conf`, `pytest.ini` |

### 3.3 ドキュメント
| 種類 | 規則 | 例 |
|-----|------|-----|
| 設計書 | `{番号}_{名称}.md` | `01_要件定義書.md` |
| README | `README.md` | プロジェクトルート |

## 4. 環境変数

| 規則 | 例 |
|-----|-----|
| UPPER_SNAKE_CASE | `YOUTUBE_API_KEY`, `MYSQL_HOST` |
| プレフィックスでグループ化 | `MYSQL_*`, `COMMENT_*` |

## 5. 感情ラベル

| ラベル | 意味 | 用途 |
|-------|------|------|
| `pos` | ポジティブ | 肯定的なコメント |
| `neg` | ネガティブ | 否定的なコメント |
| `other` | その他 | 中立・判定不能 |

## 6. ログメッセージ

### 6.1 フォーマット
```
[レベル] モジュール名: 動作 + 対象
```

### 6.2 例
```
INFO fetch: Fetching video: dQw4w9WgXcQ
INFO sentiment: Analyzed 10 comments for video: dQw4w9WgXcQ
ERROR fetch: API quota exceeded (403)
WARNING repository: Duplicate video_id, updating: dQw4w9WgXcQ
```
